{"version":2,"kind":"Notebook","sha256":"d8a592dda21e056ee8faf3fa594d874a2d933a8c9ba4449175eeabc5130de534","slug":"notebooks.foundations.intake-esm","location":"/notebooks/foundations/intake-esm.ipynb","dependencies":[],"frontmatter":{"title":"Load CMIP6 Data with Intake-ESM","content_includes_title":false,"kernelspec":{"name":"python3","display_name":"Python 3 (ipykernel)","language":"python"},"authors":[{"nameParsed":{"literal":"Ryan Abernathey","given":"Ryan","family":"Abernathey"},"name":"Ryan Abernathey","id":"contributors-myst-generated-uid-0"},{"nameParsed":{"literal":"Henri Drake","given":"Henri","family":"Drake"},"name":"Henri Drake","id":"contributors-myst-generated-uid-1"},{"nameParsed":{"literal":"Robert Ford","given":"Robert","family":"Ford"},"name":"Robert Ford","id":"contributors-myst-generated-uid-2"},{"nameParsed":{"literal":"Max Grover","given":"Max","family":"Grover"},"name":"Max Grover","id":"contributors-myst-generated-uid-3"}],"open_access":true,"license":{"content":{"id":"Apache-2.0","url":"https://opensource.org/licenses/Apache-2.0","name":"Apache License 2.0","free":true,"osi":true},"code":{"id":"CC-BY-4.0","url":"https://creativecommons.org/licenses/by/4.0/","name":"Creative Commons Attribution 4.0 International","free":true,"CC":true}},"github":"https://github.com/projectpythia/cmip6-cookbook","copyright":"2024","affiliations":[{"id":"University at Albany (State University of New York)","name":"University at Albany (State University of New York)"},{"id":"UCAR/NCAR","name":"UCAR/NCAR"}],"numbering":{"title":{"offset":1}},"edit_url":"https://github.com/projectpythia/cmip6-cookbook/blob/main/notebooks/foundations/intake-esm.ipynb","exports":[{"format":"ipynb","filename":"intake-esm.ipynb","url":"/cmip6-cookbook/build/intake-esm-acbb727da8d429a59ddaf6c4857ea939.ipynb"}]},"widgets":{},"mdast":{"type":"root","children":[{"type":"block","kind":"notebook-content","children":[{"type":"thematicBreak","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"cpdo7bCach"}],"key":"cWuNbuqeJd"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Overview","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"D6ipe1fnfN"}],"identifier":"overview","label":"Overview","html_id":"overview","implicit":true,"key":"JkZVi9QQ7R"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"link","url":"https://intake-esm.readthedocs.io/en/latest/","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Intake-ESM","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"iZ5jJDW9oW"}],"urlSource":"https://intake-esm.readthedocs.io/en/latest/","key":"k823tqSvwd"},{"type":"text","value":" is an experimental new package that aims to provide a higher-level interface to searching and loading Earth System Model data archives, such as CMIP6. The package is under very active development, and features may be unstable. Please report any ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"jkdqff3rbh"},{"type":"link","url":"https://github.com/intake/intake-esm/issues","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"issues or suggestions on GitHub","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"leQoINTn4u"}],"urlSource":"https://github.com/intake/intake-esm/issues","error":true,"key":"HnQABZbFna"},{"type":"text","value":".","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"JDKXJxKZ7d"}],"key":"AzsNBsznIT"}],"key":"dftOeWSMy4"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Prerequisites","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"XPNHyDvhq5"}],"identifier":"prerequisites","label":"Prerequisites","html_id":"prerequisites","implicit":true,"key":"TUHgddmReY"},{"type":"table","position":{"start":{"line":3,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"tableRow","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"tableCell","header":true,"position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Concepts","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"ex3gLJ759o"}],"key":"QXX1MdJNsT"},{"type":"tableCell","header":true,"position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Importance","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"vCnBXaeZb8"}],"key":"dmExZQuHTR"},{"type":"tableCell","header":true,"position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Notes","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"rxPTXHWiFv"}],"key":"nd8gfJDuRb"}],"key":"kVFiewV9yg"},{"type":"tableRow","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"link","url":"https://foundations.projectpythia.org/core/xarray/xarray-intro.html","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Intro to Xarray","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"UtHYh4SLaL"}],"urlSource":"https://foundations.projectpythia.org/core/xarray/xarray-intro.html","key":"gXwvyCil1K"}],"key":"hdQxUEGXha"},{"type":"tableCell","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Necessary","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"tTSmuXBe8F"}],"key":"PhE7uAYgqh"},{"type":"tableCell","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[],"key":"wKxbKWcHCg"}],"key":"XaOc5quKY4"},{"type":"tableRow","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"link","url":"https://foundations.projectpythia.org/core/data-formats/netcdf-cf.html","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"Understanding of NetCDF","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"hAFehEtCBw"}],"urlSource":"https://foundations.projectpythia.org/core/data-formats/netcdf-cf.html","key":"D1ZZLu8e0q"}],"key":"yeCPeIPzpz"},{"type":"tableCell","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"Helpful","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"zrJO2YIV6E"}],"key":"XKJgqIeezD"},{"type":"tableCell","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"Familiarity with metadata structure","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"NqG5rsOcF9"}],"key":"QGJJcRzkiL"}],"key":"klg4HMV2l8"}],"key":"f5VCFdAtsF"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"strong","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"Time to learn","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"IscZq5EsuO"}],"key":"sQ6WXuBpeS"},{"type":"text","value":": 5 minutes","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"VaSyv79x3A"}],"key":"DeZWxr4fFp"}],"key":"NOtvKweXrO"}],"key":"UMpHLmMVPH"},{"type":"block","kind":"notebook-content","children":[{"type":"thematicBreak","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"bLOdcRCV4p"}],"key":"QGqX41C7Yv"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Imports","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"ehyJ4UQl3K"}],"identifier":"imports","label":"Imports","html_id":"imports","implicit":true,"key":"OT8JM6VfVc"}],"key":"o0wddiOHRy"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"import xarray as xr\nxr.set_options(display_style='html')\nimport intake\n%matplotlib inline","key":"W2Yu5SJliT"},{"type":"output","id":"OKvTHedLpTmWXj-Cz-CiQ","data":[],"key":"KR3NNZO7Ks"}],"key":"RByI6YFJ2n"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Loading Data","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"K4ZXFRaX3v"}],"identifier":"loading-data","label":"Loading Data","html_id":"loading-data","implicit":true,"key":"TfqG1wdJWf"}],"key":"tM3FS4OT1D"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Intake ESM works by parsing an ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"RtuMhxZFDK"},{"type":"link","url":"https://github.com/NCAR/esm-collection-spec/","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"ESM Collection Spec","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"oOudwfiCF9"}],"urlSource":"https://github.com/NCAR/esm-collection-spec/","error":true,"key":"wxPfIokRlA"},{"type":"text","value":" and converting it to an ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"KiTfexygxC"},{"type":"link","url":"https://intake.readthedocs.io/en/latest/","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Intake","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"kOPAJgtbHg"}],"urlSource":"https://intake.readthedocs.io/en/latest/","key":"SIbUWXLvhj"},{"type":"text","value":" catalog. The collection spec is stored in a ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Vq6CYmrVAA"},{"type":"inlineCode","value":".json","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"kxNyhZbuF8"},{"type":"text","value":" file. Here we open it using Intake.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"vWcR3c9OmQ"}],"key":"qeTluA9ur8"}],"key":"cBt8giWtoJ"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"cat_url = \"https://storage.googleapis.com/cmip6/pangeo-cmip6.json\"\ncol = intake.open_esm_datastore(cat_url)\ncol","key":"RvKbHjNmoh"},{"type":"output","id":"qfFtHmPYeKNjh9AKjsSPb","data":[{"output_type":"display_data","metadata":{},"data":{"text/plain":{"content":"<IPython.core.display.HTML object>","content_type":"text/plain"},"text/html":{"content":"<p><strong>pangeo-cmip6 catalog with 7674 dataset(s) from 514818 asset(s)</strong>:</p> <div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>unique</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>activity_id</th>\n      <td>18</td>\n    </tr>\n    <tr>\n      <th>institution_id</th>\n      <td>36</td>\n    </tr>\n    <tr>\n      <th>source_id</th>\n      <td>88</td>\n    </tr>\n    <tr>\n      <th>experiment_id</th>\n      <td>170</td>\n    </tr>\n    <tr>\n      <th>member_id</th>\n      <td>657</td>\n    </tr>\n    <tr>\n      <th>table_id</th>\n      <td>37</td>\n    </tr>\n    <tr>\n      <th>variable_id</th>\n      <td>700</td>\n    </tr>\n    <tr>\n      <th>grid_label</th>\n      <td>10</td>\n    </tr>\n    <tr>\n      <th>zstore</th>\n      <td>514818</td>\n    </tr>\n    <tr>\n      <th>dcpp_init_year</th>\n      <td>60</td>\n    </tr>\n    <tr>\n      <th>version</th>\n      <td>736</td>\n    </tr>\n    <tr>\n      <th>derived_variable_id</th>\n      <td>0</td>\n    </tr>\n  </tbody>\n</table>\n</div>","content_type":"text/html"}}}],"key":"aQMBNX6OQi"}],"key":"qkRAKuCrTb"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"We can now use Intake methods to search the collection, and, if desired, export a Pandas dataframe.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"dcDXI4gA1p"}],"key":"IYkzZyzSOY"}],"key":"MuZYnu6WEu"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"cat = col.search(experiment_id=['historical', 'ssp585'], table_id='Oyr', variable_id='o2',\n                 grid_label='gn')\ncat.df","key":"HjONoSijTn"},{"type":"output","id":"MsZvQW6mIn4nB5xdTcSH_","data":[{"output_type":"execute_result","execution_count":3,"metadata":{},"data":{"text/plain":{"content":"     activity_id       institution_id      source_id experiment_id  member_id  \\\n0           CMIP                 IPSL   IPSL-CM6A-LR    historical   r8i1p1f1   \n1           CMIP                 IPSL   IPSL-CM6A-LR    historical   r5i1p1f1   \n2           CMIP                 IPSL   IPSL-CM6A-LR    historical  r26i1p1f1   \n3           CMIP                 IPSL   IPSL-CM6A-LR    historical   r2i1p1f1   \n4           CMIP                 IPSL   IPSL-CM6A-LR    historical   r6i1p1f1   \n..           ...                  ...            ...           ...        ...   \n168         CMIP                CSIRO  ACCESS-ESM1-5    historical  r11i1p1f1   \n169         CMIP  EC-Earth-Consortium   EC-Earth3-CC    historical   r1i1p1f1   \n170  ScenarioMIP  EC-Earth-Consortium   EC-Earth3-CC        ssp585   r1i1p1f1   \n171         CMIP                 CMCC      CMCC-ESM2    historical   r1i1p1f1   \n172  ScenarioMIP                 CMCC      CMCC-ESM2        ssp585   r1i1p1f1   \n\n    table_id variable_id grid_label  \\\n0        Oyr          o2         gn   \n1        Oyr          o2         gn   \n2        Oyr          o2         gn   \n3        Oyr          o2         gn   \n4        Oyr          o2         gn   \n..       ...         ...        ...   \n168      Oyr          o2         gn   \n169      Oyr          o2         gn   \n170      Oyr          o2         gn   \n171      Oyr          o2         gn   \n172      Oyr          o2         gn   \n\n                                                zstore  dcpp_init_year  \\\n0    gs://cmip6/CMIP6/CMIP/IPSL/IPSL-CM6A-LR/histor...             NaN   \n1    gs://cmip6/CMIP6/CMIP/IPSL/IPSL-CM6A-LR/histor...             NaN   \n2    gs://cmip6/CMIP6/CMIP/IPSL/IPSL-CM6A-LR/histor...             NaN   \n3    gs://cmip6/CMIP6/CMIP/IPSL/IPSL-CM6A-LR/histor...             NaN   \n4    gs://cmip6/CMIP6/CMIP/IPSL/IPSL-CM6A-LR/histor...             NaN   \n..                                                 ...             ...   \n168  gs://cmip6/CMIP6/CMIP/CSIRO/ACCESS-ESM1-5/hist...             NaN   \n169  gs://cmip6/CMIP6/CMIP/EC-Earth-Consortium/EC-E...             NaN   \n170  gs://cmip6/CMIP6/ScenarioMIP/EC-Earth-Consorti...             NaN   \n171  gs://cmip6/CMIP6/CMIP/CMCC/CMCC-ESM2/historica...             NaN   \n172  gs://cmip6/CMIP6/ScenarioMIP/CMCC/CMCC-ESM2/ss...             NaN   \n\n      version  \n0    20180803  \n1    20180803  \n2    20180803  \n3    20180803  \n4    20180803  \n..        ...  \n168  20200803  \n169  20210113  \n170  20210113  \n171  20210114  \n172  20210126  \n\n[173 rows x 11 columns]","content_type":"text/plain"},"text/html":{"content":"<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>activity_id</th>\n      <th>institution_id</th>\n      <th>source_id</th>\n      <th>experiment_id</th>\n      <th>member_id</th>\n      <th>table_id</th>\n      <th>variable_id</th>\n      <th>grid_label</th>\n      <th>zstore</th>\n      <th>dcpp_init_year</th>\n      <th>version</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>CMIP</td>\n      <td>IPSL</td>\n      <td>IPSL-CM6A-LR</td>\n      <td>historical</td>\n      <td>r8i1p1f1</td>\n      <td>Oyr</td>\n      <td>o2</td>\n      <td>gn</td>\n      <td>gs://cmip6/CMIP6/CMIP/IPSL/IPSL-CM6A-LR/histor...</td>\n      <td>NaN</td>\n      <td>20180803</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>CMIP</td>\n      <td>IPSL</td>\n      <td>IPSL-CM6A-LR</td>\n      <td>historical</td>\n      <td>r5i1p1f1</td>\n      <td>Oyr</td>\n      <td>o2</td>\n      <td>gn</td>\n      <td>gs://cmip6/CMIP6/CMIP/IPSL/IPSL-CM6A-LR/histor...</td>\n      <td>NaN</td>\n      <td>20180803</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>CMIP</td>\n      <td>IPSL</td>\n      <td>IPSL-CM6A-LR</td>\n      <td>historical</td>\n      <td>r26i1p1f1</td>\n      <td>Oyr</td>\n      <td>o2</td>\n      <td>gn</td>\n      <td>gs://cmip6/CMIP6/CMIP/IPSL/IPSL-CM6A-LR/histor...</td>\n      <td>NaN</td>\n      <td>20180803</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>CMIP</td>\n      <td>IPSL</td>\n      <td>IPSL-CM6A-LR</td>\n      <td>historical</td>\n      <td>r2i1p1f1</td>\n      <td>Oyr</td>\n      <td>o2</td>\n      <td>gn</td>\n      <td>gs://cmip6/CMIP6/CMIP/IPSL/IPSL-CM6A-LR/histor...</td>\n      <td>NaN</td>\n      <td>20180803</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>CMIP</td>\n      <td>IPSL</td>\n      <td>IPSL-CM6A-LR</td>\n      <td>historical</td>\n      <td>r6i1p1f1</td>\n      <td>Oyr</td>\n      <td>o2</td>\n      <td>gn</td>\n      <td>gs://cmip6/CMIP6/CMIP/IPSL/IPSL-CM6A-LR/histor...</td>\n      <td>NaN</td>\n      <td>20180803</td>\n    </tr>\n    <tr>\n      <th>...</th>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n    </tr>\n    <tr>\n      <th>168</th>\n      <td>CMIP</td>\n      <td>CSIRO</td>\n      <td>ACCESS-ESM1-5</td>\n      <td>historical</td>\n      <td>r11i1p1f1</td>\n      <td>Oyr</td>\n      <td>o2</td>\n      <td>gn</td>\n      <td>gs://cmip6/CMIP6/CMIP/CSIRO/ACCESS-ESM1-5/hist...</td>\n      <td>NaN</td>\n      <td>20200803</td>\n    </tr>\n    <tr>\n      <th>169</th>\n      <td>CMIP</td>\n      <td>EC-Earth-Consortium</td>\n      <td>EC-Earth3-CC</td>\n      <td>historical</td>\n      <td>r1i1p1f1</td>\n      <td>Oyr</td>\n      <td>o2</td>\n      <td>gn</td>\n      <td>gs://cmip6/CMIP6/CMIP/EC-Earth-Consortium/EC-E...</td>\n      <td>NaN</td>\n      <td>20210113</td>\n    </tr>\n    <tr>\n      <th>170</th>\n      <td>ScenarioMIP</td>\n      <td>EC-Earth-Consortium</td>\n      <td>EC-Earth3-CC</td>\n      <td>ssp585</td>\n      <td>r1i1p1f1</td>\n      <td>Oyr</td>\n      <td>o2</td>\n      <td>gn</td>\n      <td>gs://cmip6/CMIP6/ScenarioMIP/EC-Earth-Consorti...</td>\n      <td>NaN</td>\n      <td>20210113</td>\n    </tr>\n    <tr>\n      <th>171</th>\n      <td>CMIP</td>\n      <td>CMCC</td>\n      <td>CMCC-ESM2</td>\n      <td>historical</td>\n      <td>r1i1p1f1</td>\n      <td>Oyr</td>\n      <td>o2</td>\n      <td>gn</td>\n      <td>gs://cmip6/CMIP6/CMIP/CMCC/CMCC-ESM2/historica...</td>\n      <td>NaN</td>\n      <td>20210114</td>\n    </tr>\n    <tr>\n      <th>172</th>\n      <td>ScenarioMIP</td>\n      <td>CMCC</td>\n      <td>CMCC-ESM2</td>\n      <td>ssp585</td>\n      <td>r1i1p1f1</td>\n      <td>Oyr</td>\n      <td>o2</td>\n      <td>gn</td>\n      <td>gs://cmip6/CMIP6/ScenarioMIP/CMCC/CMCC-ESM2/ss...</td>\n      <td>NaN</td>\n      <td>20210126</td>\n    </tr>\n  </tbody>\n</table>\n<p>173 rows × 11 columns</p>\n</div>","content_type":"text/html"}}}],"key":"rkFoFjCrQb"}],"key":"MjqlL9oyOU"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Intake knows how to automatically open the Datasets using Xarray. Furthermore, Intake-ESM contains special logic to concatenate and merge the individual results of our query into larger, more high-level aggregated Xarray Datasets.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"ZxmrvOPL5H"}],"key":"xqVnXx4dCH"}],"key":"I9YxLSE4ML"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"dset_dict = cat.to_dataset_dict(zarr_kwargs={'consolidated': True})\nlist(dset_dict.keys())","key":"bXO7oFrrBF"},{"type":"output","id":"bNbX1EF146xkqqQN6nODl","data":[{"output_type":"stream","name":"stdout","text":"\n--> The keys in the returned dictionary of datasets are constructed as follows:\n\t'activity_id.institution_id.source_id.experiment_id.table_id.grid_label'\n"},{"output_type":"display_data","metadata":{},"data":{"text/plain":{"content":"<IPython.core.display.HTML object>","content_type":"text/plain"},"text/html":{"content":"\n<style>\n    /* Turns off some styling */\n    progress {\n        /* gets rid of default border in Firefox and Opera. */\n        border: none;\n        /* Needs to be in here for Safari polyfill so background images work as expected. */\n        background-size: auto;\n    }\n    progress:not([value]), progress:not([value])::-webkit-progress-bar {\n        background: repeating-linear-gradient(45deg, #7e7e7e, #7e7e7e 10px, #5c5c5c 10px, #5c5c5c 20px);\n    }\n    .progress-bar-interrupted, .progress-bar-interrupted::-webkit-progress-bar {\n        background: #F44336;\n    }\n</style>\n","content_type":"text/html"}}},{"output_type":"display_data","metadata":{},"data":{"text/plain":{"content":"<IPython.core.display.HTML object>","content_type":"text/plain"},"text/html":{"content":"\n    <div>\n      <progress value='0' class='' max='27' style='width:300px; height:20px; vertical-align: middle;'></progress>\n      \n    </div>\n    ","content_type":"text/html"}}},{"output_type":"stream","name":"stderr","text":"/home/runner/micromamba/envs/cmip6-cookbook-dev/lib/python3.11/site-packages/intake_esm/source.py:82: SerializationWarning: Unable to decode time axis into full numpy.datetime64[ns] objects, continuing using cftime.datetime objects instead, reason: dates out of range. To silence this warning use a coarser resolution 'time_unit' or specify 'use_cftime=True'.\n  ds = xr.open_dataset(url, **xarray_open_kwargs)\n/home/runner/micromamba/envs/cmip6-cookbook-dev/lib/python3.11/site-packages/intake_esm/source.py:82: SerializationWarning: Unable to decode time axis into full numpy.datetime64[ns] objects, continuing using cftime.datetime objects instead, reason: dates out of range. To silence this warning use a coarser resolution 'time_unit' or specify 'use_cftime=True'.\n  ds = xr.open_dataset(url, **xarray_open_kwargs)\n"},{"output_type":"stream","name":"stderr","text":"/home/runner/micromamba/envs/cmip6-cookbook-dev/lib/python3.11/site-packages/intake_esm/source.py:82: SerializationWarning: Unable to decode time axis into full numpy.datetime64[ns] objects, continuing using cftime.datetime objects instead, reason: dates out of range. To silence this warning use a coarser resolution 'time_unit' or specify 'use_cftime=True'.\n  ds = xr.open_dataset(url, **xarray_open_kwargs)\n"},{"output_type":"stream","name":"stderr","text":"/home/runner/micromamba/envs/cmip6-cookbook-dev/lib/python3.11/site-packages/dask/array/core.py:141: SerializationWarning: Unable to decode time axis into full numpy.datetime64[ns] objects, continuing using cftime.datetime objects instead, reason: dates out of range. To silence this warning use a coarser resolution 'time_unit' or specify 'use_cftime=True'.\n  c = np.asarray(c)\n"},{"output_type":"execute_result","execution_count":4,"metadata":{},"data":{"text/plain":{"content":"['ScenarioMIP.NCC.NorESM2-LM.ssp585.Oyr.gn',\n 'CMIP.EC-Earth-Consortium.EC-Earth3-CC.historical.Oyr.gn',\n 'ScenarioMIP.EC-Earth-Consortium.EC-Earth3-CC.ssp585.Oyr.gn',\n 'ScenarioMIP.DKRZ.MPI-ESM1-2-HR.ssp585.Oyr.gn',\n 'CMIP.MIROC.MIROC-ES2L.historical.Oyr.gn',\n 'ScenarioMIP.CCCma.CanESM5.ssp585.Oyr.gn',\n 'ScenarioMIP.CCCma.CanESM5-CanOE.ssp585.Oyr.gn',\n 'ScenarioMIP.MPI-M.MPI-ESM1-2-LR.ssp585.Oyr.gn',\n 'CMIP.MPI-M.MPI-ESM1-2-LR.historical.Oyr.gn',\n 'ScenarioMIP.MIROC.MIROC-ES2L.ssp585.Oyr.gn',\n 'ScenarioMIP.CMCC.CMCC-ESM2.ssp585.Oyr.gn',\n 'CMIP.CCCma.CanESM5-CanOE.historical.Oyr.gn',\n 'ScenarioMIP.MRI.MRI-ESM2-0.ssp585.Oyr.gn',\n 'CMIP.CSIRO.ACCESS-ESM1-5.historical.Oyr.gn',\n 'ScenarioMIP.DWD.MPI-ESM1-2-HR.ssp585.Oyr.gn',\n 'ScenarioMIP.NCAR.CESM2.ssp585.Oyr.gn',\n 'CMIP.NCC.NorESM2-MM.historical.Oyr.gn',\n 'ScenarioMIP.IPSL.IPSL-CM6A-LR.ssp585.Oyr.gn',\n 'CMIP.NCC.NorESM2-LM.historical.Oyr.gn',\n 'ScenarioMIP.NCC.NorESM2-MM.ssp585.Oyr.gn',\n 'CMIP.CMCC.CMCC-ESM2.historical.Oyr.gn',\n 'CMIP.IPSL.IPSL-CM5A2-INCA.historical.Oyr.gn',\n 'CMIP.MRI.MRI-ESM2-0.historical.Oyr.gn',\n 'CMIP.HAMMOZ-Consortium.MPI-ESM-1-2-HAM.historical.Oyr.gn',\n 'CMIP.MPI-M.MPI-ESM1-2-HR.historical.Oyr.gn',\n 'CMIP.IPSL.IPSL-CM6A-LR.historical.Oyr.gn',\n 'CMIP.CCCma.CanESM5.historical.Oyr.gn']","content_type":"text/plain"}}}],"key":"fW8hMYhwam"}],"key":"HNUxVvC0Jj"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"ds = dset_dict['CMIP.CCCma.CanESM5.historical.Oyr.gn']\nds","key":"lXORzkb8aj"},{"type":"output","id":"gn8HLaWR6-GzbBMjSlgZS","data":[{"output_type":"execute_result","execution_count":5,"metadata":{},"data":{"text/plain":{"content":"<xarray.Dataset> Size: 109GB\nDimensions:             (member_id: 35, dcpp_init_year: 1, time: 165, lev: 45,\n                         j: 291, i: 360, bnds: 2, vertices: 4)\nCoordinates:\n  * i                   (i) int32 1kB 0 1 2 3 4 5 6 ... 354 355 356 357 358 359\n  * j                   (j) int32 1kB 0 1 2 3 4 5 6 ... 285 286 287 288 289 290\n    latitude            (j, i) float64 838kB dask.array<chunksize=(291, 360), meta=np.ndarray>\n  * lev                 (lev) float64 360B 3.047 9.454 ... 5.375e+03 5.625e+03\n    lev_bnds            (lev, bnds) float64 720B dask.array<chunksize=(45, 2), meta=np.ndarray>\n    longitude           (j, i) float64 838kB dask.array<chunksize=(291, 360), meta=np.ndarray>\n  * time                (time) object 1kB 1850-07-02 12:00:00 ... 2014-07-02 ...\n    time_bnds           (time, bnds) object 3kB dask.array<chunksize=(165, 2), meta=np.ndarray>\n    vertices_latitude   (j, i, vertices) float64 3MB dask.array<chunksize=(291, 360, 4), meta=np.ndarray>\n    vertices_longitude  (j, i, vertices) float64 3MB dask.array<chunksize=(291, 360, 4), meta=np.ndarray>\n  * member_id           (member_id) object 280B 'r10i1p1f1' ... 'r9i1p2f1'\n  * dcpp_init_year      (dcpp_init_year) float64 8B nan\nDimensions without coordinates: bnds, vertices\nData variables:\n    o2                  (member_id, dcpp_init_year, time, lev, j, i) float32 109GB dask.array<chunksize=(1, 1, 12, 45, 291, 360), meta=np.ndarray>\nAttributes: (12/52)\n    Conventions:                      CF-1.7 CMIP-6.2\n    YMDH_branch_time_in_child:        1850:01:01:00\n    activity_id:                      CMIP\n    branch_method:                    Spin-up documentation\n    branch_time_in_child:             0.0\n    cmor_version:                     3.4.0\n    ...                               ...\n    intake_esm_attrs:table_id:        Oyr\n    intake_esm_attrs:variable_id:     o2\n    intake_esm_attrs:grid_label:      gn\n    intake_esm_attrs:version:         20190429\n    intake_esm_attrs:_data_format_:   zarr\n    intake_esm_dataset_key:           CMIP.CCCma.CanESM5.historical.Oyr.gn","content_type":"text/plain"},"text/html":{"content_type":"text/html","hash":"0aef5ac49c2304a715948b0d2809a46e","path":"/cmip6-cookbook/build/0aef5ac49c2304a715948b0d2809a46e.html"}}}],"key":"sEwLsv44wJ"}],"key":"sWAB83A5sQ"},{"type":"block","kind":"notebook-content","children":[{"type":"thematicBreak","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"M3cnKeLEda"}],"key":"RmcNprJHSS"},{"type":"block","kind":"notebook-content","data":{"tags":[]},"children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Summary","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"FLjN4gnPmr"}],"identifier":"summary","label":"Summary","html_id":"summary","implicit":true,"key":"mbvDBMfRcq"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"In this notebook, we used Intake-ESM to open an Xarray Dataset for one particular model and experiment.","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"CyRZjW0pnV"}],"key":"Bz5M5Ql0mY"},{"type":"heading","depth":3,"position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"What’s next?","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"qV3bg1iRcn"}],"identifier":"whats-next","label":"What’s next?","html_id":"whats-next","implicit":true,"key":"l9ML7Z7tXO"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"We will see an example of downloading a dataset with ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"LuP0247wD6"},{"type":"inlineCode","value":"fsspec","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"rL1svTk5Li"},{"type":"text","value":" and ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"iIxZb1K4Az"},{"type":"inlineCode","value":"zarr","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"zNLmVFEIeJ"},{"type":"text","value":".","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"Wc6ksdD4ON"}],"key":"VOY6EkfuuC"}],"visibility":"show","key":"kOSYkll0v8"},{"type":"block","kind":"notebook-content","data":{"tags":[]},"children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Resources and references","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"O9njwmuE8Q"}],"identifier":"resources-and-references","label":"Resources and references","html_id":"resources-and-references","implicit":true,"key":"IXCTAXr9vB"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"link","url":"http://gallery.pangeo.io/repos/pangeo-gallery/cmip6/intake_ESM_example.html","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"Original notebook in the Pangeo Gallery","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"qN6fIXZkPS"}],"urlSource":"http://gallery.pangeo.io/repos/pangeo-gallery/cmip6/intake_ESM_example.html","key":"Ke7QitxbFI"},{"type":"text","value":" by Henri Drake and ","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"dM6dcxhJ2y"},{"type":"link","url":"https://ocean-transport.github.io/","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"Ryan Abernathey","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"wMkWS35OjV"}],"urlSource":"https://ocean-transport.github.io/","key":"icfrMiP7Fr"}],"key":"fyewCdgLuf"}],"key":"oJu9mf8IF8"}],"visibility":"show","key":"wU7MDEMTLr"}],"key":"RPKtScKLPA"},"references":{"cite":{"order":[],"data":{}}},"footer":{"navigation":{"prev":{"title":"How to Cite This Cookbook","url":"/notebooks/how-to-cite","group":"Preamble"},"next":{"title":"Google Cloud CMIP6 Public Data: Basic Python Example","url":"/notebooks/foundations/google-cloud-basic","group":"Foundations"}}},"domain":"http://localhost:3000"}